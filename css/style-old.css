/* Модальные окна - ПРОСТОЕ И НАДЕЖНОЕ ЦЕНТРИРОВАНИЕ */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(20, 20, 40, 0.55);
  display: none; /* Скрыты по умолчанию */
  align-items: center;
  justify-content: center;
  z-index: 4000;
  backdrop-filter: blur(8px);
}

/* Показать модальное окно */
.modal.show,
.modal[style*="display: flex"] {
  display: flex !important;
}

.modal-content {
  background: var(--card-bg, #23234a);
  border-radius: 16px;
  box-shadow: 0 8px 32px rgba(60,40,120,0.18);
  padding: 32px 28px 24px 28px;
  min-width: 320px;
  max-width: 500px;
  width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  color: var(--text, #e2e8f0);
  position: relative;
  margin: 20px; /* Отступы от краев экрана */
}

/* Ультра-агрессивная мобильная адаптация для POCO и подобных устройств */
@media screen and (max-width: 1600px) and (pointer: coarse),
       screen and (max-width: 1600px) and (hover: none),
       screen and (max-width: 1600px) and (-webkit-min-device-pixel-ratio: 1.5) {
  /* Принудительная мобилизация для всех тач-устройств до 1600px */
  body,
  html {
    font-size: 16px !important;
  }
  
  .container {
    max-width: 100% !important;
    padding: 12px !important;
  }
  
  .main-content {
    padding: 16px !important;
  }
  
  .stats-grid,
  .panel-grid {
    grid-template-columns: 1fr !important;
    gap: 16px !important;
  }
  
  .form-group input,
  .form-group select,
  .form-group textarea {
    padding: 18px !important;
    font-size: 16px !important;
    min-height: 50px !important;
    border-radius: 10px !important;
  }
  
  .btn,
  button {
    padding: 18px 28px !important;
    font-size: 16px !important;
    min-height: 52px !important;
    border-radius: 10px !important;
  }
}

@media screen and (max-width: 1500px) and (pointer: coarse),
       screen and (max-width: 1500px) and (hover: none) {
  /* Специально для POCO X6 Pro и флагманов с широким экраном */
  .container {
    max-width: 100% !important;
    padding: 12px !important;
  }
  
  .main-content {
    padding: 16px !important;
  }
  
  .stats-grid {
    grid-template-columns: 1fr !important;
    gap: 16px !important;
  }
  
  .panel-grid {
    grid-template-columns: 1fr !important;
    gap: 16px !important;
  }
}

@media screen and (max-width: 1400px) and (pointer: coarse) {
  /* Правила для сенсорных устройств с шириной до 1400px */
  .form-group {
    margin-bottom: 20px;
  }
  
  .form-group input,
  .form-group select {
    padding: 16px;
    font-size: 16px;
    border-radius: 8px;
  }
  
  .btn {
    padding: 16px 24px;
    font-size: 16px;
    min-height: 48px;
  }
}

@media screen and (max-width: 1300px) {
  /* Адаптация для экранов до 1300px */
  .container {
    max-width: 100%;
    padding: 10px;
  }
  
  .main-content {
    padding: 15px;
  }
  
  .stats-grid {
    grid-template-columns: 1fr;
    gap: 15px;
  }
  
  .transactions-container {
    height: calc(100vh - 300px);
  }
}

@media screen and (max-width: 1200px) {
  /* Мобильная адаптация для флагманских Android устройств */
  body {
    font-size: 16px; /* Предотвращаем зум на iOS */
  }
  
  .form-group input,
  .form-group select,
  .form-group textarea {
    padding: 16px;
    font-size: 16px; /* Предотвращаем зум на iOS */
    border-radius: 8px;
    min-height: 48px;
  }
  
  .btn {
    padding: 16px 24px;
    font-size: 16px;
    min-height: 48px;
    border-radius: 8px;
  }
  
  .transaction-item {
    padding: 16px;
    margin-bottom: 12px;
  }
  
  .category-badge {
    padding: 8px 12px;
    font-size: 14px;
  }
  
  .person-badge {
    padding: 6px 10px;
    font-size: 13px;
  }
}

@media screen and (max-width: 1100px) {
  /* Дополнительная адаптация для широких мобильных экранов */
  .header {
    padding: 15px 20px;
  }
  
  .header h1 {
    font-size: 24px;
  }
  
  .stats-card {
    padding: 20px;
  }
  
  .stats-card h3 {
    font-size: 18px;
  }
  
  .stats-card .amount {
    font-size: 24px;
  }
}

/* Специальные правила для высокоразрешающих мобильных экранов */
@media screen and (max-width: 1000px) and (min-resolution: 2dppx) {
  /* Правила для Retina и подобных дисплеев */
  .container {
    padding: 8px;
  }
  
  .transaction-item {
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
  
  .btn {
    border-radius: 10px;
    font-weight: 500;
  }
}

/* Правила для устройств с соотношением сторон больше 1.5:1 (мобильные) */
@media screen and (min-aspect-ratio: 1/1.5) {
  .mobile-device .form-group input,
  .mobile-device .form-group select {
    padding: 18px;
    font-size: 16px;
  }
  
  .mobile-device .btn {
    padding: 18px 28px;
    min-height: 50px;
  }
}

/* Поддержка устройств POCO и Xiaomi */
@supports (-webkit-touch-callout: none) {
  /* Правила для WebKit мобильных браузеров */
  .form-group input:focus,
  .form-group select:focus,
  .form-group textarea:focus {
    transform: none; /* Предотвращаем зум */
  }
}

/* Принудительные мобильные стили для проблемных устройств */
.mobile-device,
.force-mobile,
.poco-device {
  /* Принудительно применяем мобильную типографику */
  font-size: 16px !important;
}

.mobile-device .form-group input,
.mobile-device .form-group select,
.mobile-device .form-group textarea,
.force-mobile .form-group input,
.force-mobile .form-group select,
.force-mobile .form-group textarea,
.poco-device .form-group input,
.poco-device .form-group select,
.poco-device .form-group textarea {
  padding: 18px !important;
  font-size: 16px !important;
  min-height: 50px !important;
  border-radius: 10px !important;
  -webkit-appearance: none !important;
  -moz-appearance: none !important;
  appearance: none !important;
}

.mobile-device .btn,
.mobile-device button,
.force-mobile .btn,
.force-mobile button,
.poco-device .btn,
.poco-device button {
  padding: 18px 28px !important;
  font-size: 16px !important;
  min-height: 52px !important;
  border-radius: 10px !important;
  font-weight: 500 !important;
}

.mobile-device .container,
.force-mobile .container,
.poco-device .container {
  max-width: 100% !important;
  padding: 12px !important;
}

.mobile-device .main-content,
.force-mobile .main-content,
.poco-device .main-content {
  padding: 16px !important;
}

.mobile-device .stats-grid,
.force-mobile .stats-grid,
.poco-device .stats-grid {
  grid-template-columns: 1fr !important;
  gap: 16px !important;
}

.mobile-device .panel-grid,
.force-mobile .panel-grid,
.poco-device .panel-grid {
  grid-template-columns: 1fr !important;
  gap: 16px !important;
}

.mobile-device .transaction-item,
.force-mobile .transaction-item,
.poco-device .transaction-item {
  padding: 16px !important;
  margin-bottom: 12px !important;
  border-radius: 12px !important;
}

.mobile-device .modal-content,
.force-mobile .modal-content,
.poco-device .modal-content {
  width: 95% !important;
  max-width: 95% !important;
  margin: 20px auto !important;
  border-radius: 16px !important;
}

/* Экстра принудительные стили для POCO устройств */
.poco-device * {
  box-sizing: border-box !important;
}

.poco-device .header,
.poco-device .stats-container,
.poco-device .transactions-container {
  width: 100% !important;
  max-width: 100% !important;
}

/* Специальные правила для Android WebView */
@media screen and (-webkit-min-device-pixel-ratio: 1.5) {
  .mobile-device *,
  .force-mobile *,
  .poco-device * {
    -webkit-text-size-adjust: none !important;
    text-size-adjust: none !important;
  }
}

/* Адаптация для мобильных устройств */
/* Используем более широкий диапазон для современных смартфонов */
@media (max-width: 1024px) and (pointer: coarse) {
  .modal-content {
    width: 95%;
    max-width: 95vw;
    padding: 24px 20px 20px 20px;
    margin: 10px;
    min-width: 280px;
  }
}

/* Специальные стили для устройств, определенных JavaScript как мобильные */
.mobile-device .modal-content {
  width: 95% !important;
  max-width: 95vw !important;
  padding: 24px 20px 20px 20px !important;
  margin: 10px !important;
  min-width: 280px !important;
}

/* Резервный вариант для старых браузеров */
@media (max-width: 768px) {
  .modal-content {
    width: 95%;
    max-width: 95vw;
    padding: 24px 20px 20px 20px;
    margin: 10px;
    min-width: 280px;
  }
}

/* Для отладки - красная рамка */
.modal-debug {
  border: 2px solid red !important;
}

.modal-content-debug {
  border: 2px solid blue !important;
}

/* Улучшения для мобильных касаний */
@media (hover: none) and (pointer: coarse) {
  /* Стили для устройств с сенсорным экраном */
  .goal-item,
  .budget-progress-item,
  button,
  .btn {
    cursor: default;
  }
  
  /* Увеличенные области нажатия */
  .goal-actions .btn,
  .budget-actions .btn {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Убираем hover эффекты на touch устройствах */
  .goal-item:hover,
  .budget-progress-item:hover {
    transform: none;
    box-shadow: initial;
  }
}

/* ========== АНИМАЦИИ ПЕРЕХОДОВ ========== */

/* Плавные переходы для всех интерактивных элементов */
* {
  transition: color 0.2s ease, background-color 0.2s ease, border-color 0.2s ease, 
              box-shadow 0.2s ease, transform 0.2s ease, opacity 0.2s ease;
}

/* Анимация кнопок */
button, .btn {
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
}

button:active, .btn:active {
  transform: scale(0.98);
}

/* Ripple эффект для кнопок */
button::after, .btn::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  transform: translate(-50%, -50%);
  transition: width 0.4s ease, height 0.4s ease;
  pointer-events: none;
}

button:active::after, .btn:active::after {
  width: 200px;
  height: 200px;
}

/* Анимация карточек */
.goal-item,
.budget-progress-item,
.transaction-item {
  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}

.goal-item:active,
.budget-progress-item:active {
  transform: scale(0.98);
}

/* Анимация бургер-меню */
.burger-menu {
  transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1),
              opacity 0.3s ease;
}

/* Анимация линий бургера */
.burger-line {
  transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.burger-button.active .burger-line:nth-child(1) {
  transform: rotate(45deg) translate(5px, 5px);
}

.burger-button.active .burger-line:nth-child(2) {
  opacity: 0;
  transform: scale(0);
}

.burger-button.active .burger-line:nth-child(3) {
  transform: rotate(-45deg) translate(7px, -6px);
}

/* Анимация появления операций */
.transaction-item {
  animation: slideInFromRight 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
}

@keyframes slideInFromRight {
  0% {
    opacity: 0;
    transform: translateX(30px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Анимация для карточек целей и бюджета */
.goal-item,
.budget-progress-item {
  animation: fadeInUp 0.5s ease;
}

@keyframes fadeInUp {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Анимация прогресс-баров */
.goal-progress-bar::before,
.budget-progress-bar::before {
  animation: progressFill 1s ease-in-out;
}

@keyframes progressFill {
  0% {
    width: 0;
  }
}

/* Анимация загрузки */
.loading-fade-in {
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  0% { opacity: 0; }
  100% { opacity: 1; }
}

/* Удален дублирующийся блок стилей уведомлений - используется основной блок ниже */

@keyframes slideInFromTop {
  0% {
    opacity: 0;
    transform: translateY(-100px) scale(0.9);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes slideOutToTop {
  0% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(-100px) scale(0.9);
  }
}

/* Pulse анимация для важных элементов */
.pulse {
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(139, 92, 246, 0.7);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(139, 92, 246, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(139, 92, 246, 0);
  }
}

/* Анимация для мобильного меню */
@media (max-width: 768px) {
  /* Анимация элементов меню */
  .burger-menu.active .burger-item {
    opacity: 0;
    transform: translateX(-20px);
    animation: slideInMenuItem 0.3s ease forwards;
  }
  
  .burger-menu.active .burger-item:nth-child(1) { animation-delay: 0.1s; }
  .burger-menu.active .burger-item:nth-child(2) { animation-delay: 0.2s; }
  .burger-menu.active .burger-item:nth-child(3) { animation-delay: 0.3s; }
  .burger-menu.active .burger-item:nth-child(4) { animation-delay: 0.4s; }
  
  @keyframes slideInMenuItem {
    0% {
      opacity: 0;
      transform: translateX(-20px);
    }
    100% {
      opacity: 1;
      transform: translateX(0);
    }
  }
}
.modal .close {
  position: absolute;
  top: 18px;
  right: 22px;
  background: none;
  border: none;
  font-size: 2em;
  color: var(--danger, #ef4444);
  cursor: pointer;
}
/* Селектор пользователя */
#userSelect {
  background: linear-gradient(90deg, #ede9fe 0%, #dbeafe 100%);
  border: 1px solid var(--card-border, #c7d2fe);
  border-radius: 7px;
  box-shadow: 0 2px 8px rgba(124,58,237,0.07);
  color: #312e81;
  font-weight: 500;
  font-size: 1em;
  padding: 6px 18px;
  outline: none;
  transition: box-shadow 0.2s, border 0.2s;
}
#userSelect:focus, #userSelect:hover {
  border-color: #7c3aed;
  box-shadow: 0 2px 12px rgba(124,58,237,0.13);
}
/* Уведомления */
.notification {
  position: fixed;
  top: 0;
  left: 50%;
  transform: translateX(-50%) !important;
  margin: 0 !important;
  right: auto !important;
  box-shadow: 0 2px 8px rgba(0,0,0,0.10);
  min-width: 80px;
  max-width: 320px;
  padding: 4px 10px;
  border-radius: 3px;
  font-size: 0.92em;
  white-space: pre-line;
  word-break: break-word;
  font-weight: 500;
  color: #fff;
  background: var(--primary, #7c3aed);
  box-shadow: 0 4px 18px rgba(0,0,0,0.13);
  z-index: 9999;
  display: block;
  opacity: 0;
  pointer-events: none;
  transition: opacity 1.2s, transform 0.7s cubic-bezier(.4,.8,.4,1);
  /* animation отключена для стабильного позиционирования */
}

@keyframes notif-fly-in {
  0% {
    opacity: 0;
    transform: translateX(-50%) translateY(40px);
  }
  60% {
    opacity: 1;
    transform: translateX(-50%) translateY(-8px);
  }
  100% {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}
.notification.show {
  opacity: 1;
  pointer-events: auto;
  transform: translateX(-50%) !important;
}
.notification.success { background: var(--success, #10b981); }
.notification.error { background: var(--danger, #ef4444); }
.notification.info { background: var(--primary, #7c3aed); }
.notification.warning { background: var(--warning, #f59e0b); color: #22223b; }
:root {
        --primary: #6d28d9;
        --secondary: #4c1d95;
        --success: #10b981;
        --danger: #ef4444;
        --warning: #f59e0b;
        --info: #3b82f6;
        --dark: #0f0f23;
        --darker: #090915;
        --background: #1a1b2e;
        --card-bg: #1a1b2e;
        --card-border: #2d2d42;
        --text: #e2e8f0;
        --text-muted: #94a3b8;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, var(--darker) 0%, var(--dark) 100%);
        color: var(--text);
        line-height: 1.6;
        overflow-x: hidden;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
      }

      /* Объединенный блок заголовка и дашборда */
      .unified-header-dashboard {
        background: var(--card-bg);
        border-radius: 20px;
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        border: 1px solid var(--card-border);
        overflow: hidden;
        margin-bottom: 30px;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .unified-header-dashboard:hover {
        transform: translateY(-2px);
        box-shadow: 0 16px 50px rgba(0, 0, 0, 0.2);
      }

      /* Секция с информацией о паре */
      .couple-header-section {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        padding: 25px 30px;
        color: white;
      }

      .app-title-area {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 25px;
      }

      .app-title h1 {
        font-size: 2.2rem;
        margin: 0 0 5px 0;
        font-weight: 700;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      }

      .app-title p {
        margin: 0;
        font-size: 1em;
        opacity: 0.9;
      }

      .user-selector {
        display: flex;
        align-items: center;
        gap: 10px;
        background: rgba(255, 255, 255, 0.1);
        padding: 8px 15px;
        border-radius: 12px;
        backdrop-filter: blur(10px);
      }

      .user-selector label {
        font-size: 0.9em;
        color: rgba(255, 255, 255, 0.9);
        margin: 0;
      }

      .user-selector select {
        padding: 6px 12px;
        border-radius: 8px;
        border: none;
        background: white;
        color: var(--text);
        font-weight: 500;
        cursor: pointer;
      }

      /* Статистика пары */
      .couple-stats-grid {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 20px;
      }

      .person-stat {
        display: flex;
        align-items: center;
        gap: 15px;
        background: rgba(255, 255, 255, 0.1);
        padding: 15px;
        border-radius: 12px;
        backdrop-filter: blur(10px);
        transition: transform 0.2s ease;
      }

      .person-stat:hover {
        transform: scale(1.02);
      }

      .person-avatar {
        font-size: 2.5em;
        opacity: 0.9;
      }

      .person-info {
        flex: 1;
      }

      .person-name {
        font-size: 1.1em;
        font-weight: 600;
        margin-bottom: 5px;
      }

      .person-amount {
        font-size: 1.4em;
        font-weight: 700;
        margin-bottom: 2px;
      }

      .person-period {
        font-size: 0.85em;
        opacity: 0.8;
      }

      /* Центральный блок общего баланса */
      .total-balance-display {
        display: flex;
        flex-direction: column;
        align-items: center;
        background: rgba(255, 255, 255, 0.15);
        padding: 20px;
        border-radius: 15px;
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .balance-icon {
        font-size: 3em;
        margin-bottom: 10px;
        opacity: 0.9;
      }

      .balance-label {
        font-size: 1em;
        margin-bottom: 8px;
        opacity: 0.9;
      }

      .balance-value {
        font-size: 2em;
        font-weight: 700;
        margin-bottom: 5px;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      }

      .balance-status {
        font-size: 0.8em;
        opacity: 0.7;
      }

      /* Секция детальной статистики */
      .detailed-stats-section {
        padding: 25px 30px;
        background: var(--card-bg);
      }



      .balance-subtitle {
        font-size: 0.9em;
        color: var(--text-secondary);
        margin-top: 5px;
      }



      /* Трехколоночная система панелей */
      .three-column-panels {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 20px;
        margin-top: 32px;
        align-items: stretch;
      }

      .panel-column {
        display: flex;
        flex-direction: column;
      }

      .operations-column .card {
        background: var(--card-bg);
      }

      .budget-column .card {
        background: var(--card-bg);
      }

      .goals-column .card {
        background: var(--card-bg);
      }

      /* Все карточки в трех колонках адаптивной высоты */
      .three-column-panels .card {
        flex: 1;
        display: flex;
        flex-direction: column;
        height: auto;
      }

      /* Контейнеры содержимого для трех колонок */
      #collapse-transactions,
      #collapse-budget-usage,
      #collapse-goals {
        padding: 12px;
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      /* Специальные стили для блока бюджета */
      .budget-usage-card #collapse-budget-usage {
        padding: 15px;
      }

      .budget-usage-card #budgetProgressBars {
        flex: 1;
        overflow: visible;
      }

      /* Responsive для трехколоночной системы */
      @media (max-width: 1200px) {
        .three-column-panels {
          grid-template-columns: 1fr 1fr;
          gap: 16px;
        }

        .budget-column {
          grid-column: 1 / -1;
        }
      }

      @media (max-width: 768px) {
        .three-column-panels {
          grid-template-columns: 1fr;
          gap: 12px;
          margin-top: 16px;
          overflow: hidden;
        }

        .three-column-panels .card {
          min-height: auto;
          overflow: hidden;
        }

        .container {
          padding: 12px;
          overflow-x: hidden;
        }

        #collapse-transactions,
        #collapse-budget-usage,
        #collapse-goals {
          padding: 8px;
          gap: 8px;
          overflow: hidden;
        }

        /* Мобильные стили для целей */
        .goal-item {
          margin-bottom: 12px;
          padding: 14px;
          min-height: 140px;
          border-radius: 12px;
        }

        .goal-item:hover {
          padding: 14px;
          margin-bottom: 12px;
        }

        .goal-name {
          font-size: 0.95em;
          margin-bottom: 8px;
        }

        .goal-amounts {
          font-size: 0.85em;
          padding: 6px 8px;
          min-width: 80px;
        }

        .goal-header {
          flex-direction: row;
          justify-content: space-between;
          align-items: center;
          gap: 8px;
          margin-bottom: 8px;
        }

        .goal-progress-bar {
          height: 8px;
          margin-bottom: 8px;
        }

        .goal-status-text {
          font-size: 0.75em;
          padding: 6px 8px;
          margin-bottom: 8px;
          text-align: center;
          border-radius: 8px;
        }

        .goal-actions {
          display: flex !important;
          justify-content: center;
          gap: 8px;
          margin-top: auto;
        }

        .goal-actions .btn {
          padding: 6px 10px;
          font-size: 0.75em;
        }

        /* Мобильные стили для карточек бюджета */
        .budget-progress-item {
          margin-bottom: 12px;
          padding: 14px;
          min-height: 140px;
          border-radius: 12px;
        }

        .budget-category-name {
          font-size: 0.95em;
          margin-bottom: 8px;
        }

        .budget-amounts {
          font-size: 0.85em;
          padding: 6px 8px;
          min-width: 80px;
        }

        .budget-progress-bar {
          height: 8px;
          margin-bottom: 8px;
        }

        .budget-status-text {
          font-size: 0.75em;
          padding: 6px 8px;
          margin-bottom: 8px;
          text-align: center;
          border-radius: 8px;
        }

        .budget-actions {
          justify-content: center;
          gap: 8px;
          margin-top: auto;
        }

        .budget-actions .btn {
          padding: 6px 10px;
          font-size: 0.75em;
        }

      }

      /* Специальные стили для телефонов */
      @media (max-width: 480px) {
        .container {
          padding: 8px;
        }

        #collapse-transactions,
        #collapse-budget-usage,
        #collapse-goals {
          padding: 6px;
          gap: 6px;
        }

        .goal-item,
        .budget-progress-item {
          margin-bottom: 8px;
          padding: 10px;
          min-height: 130px;
          border-radius: 10px;
        }

        /* Улучшенная компоновка для целей на маленьких экранах */
        .goal-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 4px;
          margin-bottom: 6px;
        }

        .goal-name {
          font-size: 0.85em;
          line-height: 1.2;
        }

        .goal-amounts {
          align-self: flex-end;
          font-size: 0.75em;
          padding: 4px 6px;
        }

        .goal-name,
        .budget-category-name {
          font-size: 0.9em;
        }

        .goal-amounts,
        .budget-amounts {
          font-size: 0.75em;
          padding: 4px 6px;
          min-width: 70px;
        }

        .goal-actions .btn,
        .budget-actions .btn {
          padding: 4px 8px;
          font-size: 0.7em;
          min-width: 35px;
          border-radius: 6px;
        }

        .goal-progress-bar,
        .budget-progress-bar {
          height: 8px;
          margin-bottom: 8px;
        }

        .goal-status-text,
        .budget-status-text {
          font-size: 0.7em;
          padding: 4px 6px;
          margin-bottom: 6px;
        }

        .three-column-panels {
          gap: 8px;
          margin-top: 12px;
        }

        .app-title h1 {
          font-size: 1.8rem;
        }

        .app-title p {
          font-size: 0.9em;
        }

        .header-info {
          flex-direction: column;
          align-items: flex-start;
          gap: 8px;
          margin-bottom: 15px;
        }

        /* Улучшенные touch-кнопки для мобильных */
        .btn-add-goal,
        .btn-primary,
        button {
          min-height: 44px;
          padding: 8px 12px;
          font-size: 0.9em;
          border-radius: 8px;
        }

        /* Улучшенные формы для мобильных */
        input[type="text"],
        input[type="number"],
        select,
        textarea {
          min-height: 44px;
          font-size: 16px; /* Предотвращает зум на iOS */
          padding: 8px 12px;
          border-radius: 8px;
        }

        /* Бургер-меню всегда видно на мобильных */
        .burger-button {
          display: flex !important;
          z-index: 1001;
          position: fixed;
          top: 10px;
          left: 10px;
          width: 42px;
          height: 42px;
          background: linear-gradient(135deg, var(--primary), #7c3aed);
          border-radius: 10px;
          border: 2px solid rgba(255, 255, 255, 0.15);
          box-shadow: 0 2px 12px rgba(0, 0, 0, 0.3);
          padding: 0;
          justify-content: center;
          align-items: center;
        }

        .burger-lines {
          gap: 2px;
        }

        .burger-line {
          width: 16px;
          height: 2px;
        }

        /* Скрываем лишний функционал на мобильных */
        .budget-column,
        .goals-column {
          display: none !important;
        }

        /* Операции на всю ширину */
        .operations-column {
          grid-column: 1 / -1;
          width: 100%;
          overflow: hidden;
        }

        /* Улучшенная компоновка для списка операций */
        .transactions-list {
          width: 100%;
          overflow: hidden;
        }

        /* Контейнер операций не должен выходить за границы */
        #transactionsList {
          width: 100%;
          max-width: 100%;
          overflow: hidden;
          box-sizing: border-box;
        }

        /* Операции более компактные на мобильных */
        .transaction-item {
          padding: 8px 10px;
          margin-bottom: 6px;
          border-radius: 8px;
          flex-direction: row;
          align-items: center;
          gap: 8px;
          min-height: auto;
          max-height: none;
        }

        /* Информация о транзакции */
        .transaction-info {
          flex: 1;
          min-width: 0;
        }

        /* Компактные значки категорий */
        .category-badge {
          font-size: 0.75em !important;
          padding: 2px 6px !important;
          margin: 0 4px 4px 0 !important;
          border-radius: 6px !important;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
          max-width: 120px;
          display: inline-block;
        }

        .person-badge {
          font-size: 0.7em !important;
          padding: 1px 4px !important;
          margin-left: 4px !important;
        }

        /* Скрываем кнопку редактирования на мобильных */
        .transaction-actions .edit-btn,
        .transaction-actions button[onclick*="editTransaction"] {
          display: none !important;
        }

        /* Компактная кнопка удаления */
        .transaction-actions {
          margin-left: 4px;
          gap: 0;
        }

        .transaction-actions button {
          padding: 4px !important;
          font-size: 0.8em !important;
          min-width: 32px;
          min-height: 32px;
        }

        .transaction-amount {
          font-size: 0.95em;
          font-weight: 600;
          white-space: nowrap;
          margin-left: 8px;
        }

        /* Делаем описание и дату более компактными */
        .transaction-info > div:nth-child(2) { /* описание */
          font-size: 0.75em !important;
          margin-bottom: 2px !important;
          line-height: 1.2;
        }

        .transaction-info > div:nth-child(3) { /* дата */
          font-size: 0.7em !important;
          margin-bottom: 0 !important;
        }

        /* Скрываем статистику - показываем только баланс */
        .analytics-container,
        .quick-templates-container,
        .quick-templates-section,
        .quick-templates-grid,
        .quick-templates-header,
        .btn-create-template,
        .btn-edit-templates,
        .detailed-stats-section,
        .stats-grid,
        .stat-item,
        .savings-info,
        .budget-summary {
          display: none !important;
        }

        /* Скрываем сложные функции в бургер-меню */
        .burger-item:nth-of-type(3), /* Цели */
        .burger-item:nth-of-type(4), /* Категории */
        .burger-item:nth-of-type(5), /* Бюджет по категориям */
        .burger-item:nth-of-type(6), /* Повторяющиеся */
        .burger-item:nth-of-type(7) { /* Аналитика */
          display: none !important;
        }

        /* Упрощенный заголовок бургер-меню */
        .burger-menu-header h3 {
          font-size: 1.1em;
        }

        /* Более крупные кнопки для touch */
        .burger-item {
          min-height: 50px;
          font-size: 1em;
          padding: 12px 16px;
        }

        /* Улучшенный блок баланса для мобильных */
        .balance-info {
          text-align: center;
          padding: 20px 16px;
          margin-bottom: 16px;
          background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(20, 184, 166, 0.1));
          border-radius: 16px;
          border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .balance-amount {
          font-size: 2.2em !important;
          font-weight: 700;
          margin-bottom: 8px;
        }

        .balance-subtitle {
          font-size: 1em !important;
          opacity: 0.9;
        }
      }

      /* Стили для очень маленьких экранов (iPhone SE и подобные) */
      @media (max-width: 360px) {
        .container {
          padding: 4px;
        }

        .app-title h1 {
          font-size: 1.5rem;
        }

        .goal-item,
        .budget-progress-item {
          padding: 8px;
          min-height: 100px;
        }

        .goal-name,
        .budget-category-name {
          font-size: 0.8em;
          gap: 6px;
        }

        .goal-amounts,
        .budget-amounts {
          font-size: 0.7em;
          padding: 3px 5px;
          min-width: 60px;
        }

        .goal-actions .btn,
        .budget-actions .btn {
          padding: 3px 6px;
          font-size: 0.65em;
          min-width: 30px;
        }

        .goal-progress-bar,
        .budget-progress-bar {
          height: 6px;
          margin-bottom: 6px;
        }

        #collapse-transactions,
        #collapse-budget-usage,
        #collapse-goals {
          padding: 4px;
          gap: 4px;
        }

        /* Бургер-меню для очень маленьких экранов */
        .burger-button {
          top: 6px;
          left: 6px;
          width: 38px;
          height: 38px;
          border-radius: 8px;
          border: 1px solid rgba(255, 255, 255, 0.2);
          padding: 0;
          justify-content: center;
          align-items: center;
        }

        .burger-lines {
          gap: 2px;
        }

        .burger-line {
          width: 14px;
          height: 2px;
        }

        /* Дополнительные скрытия для маленьких экранов */
        .budget-column,
        .goals-column,
        .analytics-container,
        .quick-templates-container,
        .quick-templates-section,
        .quick-templates-grid,
        .quick-templates-header,
        .btn-create-template,
        .btn-edit-templates,
        .detailed-stats-section,
        .stats-grid,
        .stat-item,
        .savings-info,
        .budget-summary {
          display: none !important;
        }

        /* Скрываем сложные функции в бургер-меню для маленьких экранов */
        .burger-item:nth-of-type(3),
        .burger-item:nth-of-type(4),
        .burger-item:nth-of-type(5),
        .burger-item:nth-of-type(6),
        .burger-item:nth-of-type(7) {
          display: none !important;
        }

        /* Компактный баланс для маленьких экранов */
        .balance-amount {
          font-size: 1.8em !important;
        }

        .burger-item {
          min-height: 46px;
          font-size: 0.95em;
          padding: 10px 14px;
        }

        /* Супер-компактные операции для маленьких экранов */
        .transaction-item {
          padding: 6px 8px;
          margin-bottom: 4px;
          border-radius: 6px;
          gap: 6px;
        }

        .category-badge {
          font-size: 0.7em !important;
          padding: 1px 4px !important;
          max-width: 100px !important;
        }

        .person-badge {
          font-size: 0.65em !important;
          padding: 1px 3px !important;
        }

        .transaction-amount {
          font-size: 0.85em;
          margin-left: 4px;
        }

        /* Кнопка удаления меньше */
        .transaction-actions button {
          padding: 2px !important;
          font-size: 0.75em !important;
          min-width: 28px !important;
          min-height: 28px !important;
        }

        /* Описание и дата еще компактнее */
        .transaction-info > div:nth-child(2) {
          font-size: 0.7em !important;
        }

        .transaction-info > div:nth-child(3) {
          font-size: 0.65em !important;
        }

        /* Модальные окна на очень маленьких экранах */
        .modal-content {
          padding: 20px 16px 16px 16px;
          min-width: 280px;
          max-width: 95vw;
          width: 95%;
          border-radius: 12px;
          margin: 10px;
        }

        .modal .close {
          top: 8px;
          right: 12px;
          width: 24px;
          height: 24px;
        }
      }

      /* Унифицированная система блоков */
      .main-panels {
        display: flex;
        gap: 32px;
        align-items: stretch !important; /* Изменили с flex-start на stretch */
        margin-top: 32px;
      }

      .main-panels > div {
        display: flex;
        flex-direction: column;
      }

      .main-panels .card {
        flex: 1;
        display: flex;
        flex-direction: column;
        min-height: 600px; /* Минимальная высота для всех блоков */
      }

      .card #collapse-transactions,
      .card #collapse-goals {
        flex: 1;
        display: flex;
        flex-direction: column;
      }

      .transactions-list {
        flex: 1;
        overflow: visible;
      }

      #goalsList {
        flex: 1;
        overflow: visible;
      }

      /* Улучшенные стили для карточек */
      .card {
        background: var(--card-bg) !important;
        border: 1px solid var(--card-border) !important;
        border-top: none !important;
        border-radius: 0 0 16px 16px !important;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1) !important;
        transition: all 0.3s ease;
        overflow: hidden;
        padding: 16px;
        height: 100%;
        margin-top: 0 !important;
      }

      .card > div {
        height: 100%;
        overflow-y: auto;
      }

      .card:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
      }

      /* Заголовок панели - грибочек НАД блоком */
      .panel-header {
        background: linear-gradient(135deg, 
          rgba(99, 102, 241, 0.9), 
          rgba(168, 85, 247, 0.9)
        );
        border: 1px solid rgba(99, 102, 241, 0.3);
        border-bottom: none;
        border-radius: 16px 16px 0 0;
        padding: 10px 16px;
        margin: 0 0 0 0;
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 20px rgba(99, 102, 241, 0.3);
        z-index: 10;
        position: relative;
      }

      .panel-header h2 {
        color: white;
        font-size: 0.95em;
        font-weight: 600;
        margin: 0;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        font-family: inherit;
        letter-spacing: 0.3px;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
      }

      .card-header {
        display: none; /* Скрываем старые заголовки */
      }

      .collapse-btn {
        background: rgba(255, 255, 255, 0.2) !important;
        border: 1px solid rgba(255, 255, 255, 0.3) !important;
        border-radius: 6px !important;
        padding: 4px 6px !important;
        color: white !important;
        transition: all 0.3s ease !important;
        font-size: 0.75em !important;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(5px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        margin-left: auto;
        z-index: 11;
      }

      .collapse-btn:hover {
        background: rgba(255, 255, 255, 0.3) !important;
        border-color: rgba(255, 255, 255, 0.5) !important;
        transform: scale(1.1);
        box-shadow: 0 3px 12px rgba(0, 0, 0, 0.2);
      }

      /* Стили для быстрых шаблонов */
      .quick-templates-section {
        background: var(--card-bg);
        border: 1px solid var(--card-border);
        border-radius: 16px;
        padding: 20px;
        margin: 20px 0;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
      }

      .quick-templates-section:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
      }

      .quick-templates-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
        padding-bottom: 12px;
        border-bottom: 1px solid var(--card-border);
      }

      .quick-templates-header h3 {
        margin: 0;
        color: var(--text);
        font-size: 1.2em;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .btn-create-template {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        color: white;
        border: none;
        border-radius: 10px;
        padding: 8px 16px;
        font-size: 0.9em;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
      }

      .btn-create-template:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
      }

      .quick-templates-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 12px;
      }

      /* Responsive для быстрых шаблонов */
      @media (max-width: 768px) {
        .quick-templates-section {
          margin: 15px 0;
          padding: 15px;
        }

        .quick-templates-header {
          flex-direction: column;
          gap: 10px;
          align-items: stretch;
        }

        .quick-templates-grid {
          grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
          gap: 10px;
        }
      }

      /* Стили для панелей */
      .main-panel-left {
        flex: 2;
        min-width: 0;
        display: flex;
        flex-direction: column;
      }

      .main-panel-right {
        flex: 1;
        min-width: 320px;
        display: flex;
        flex-direction: column;
      }

      .transactions-card {
        background: var(--card-bg);
        border-radius: 0 0 16px 16px !important;
        border-top: none !important;
      }

      .goals-card {
        background: var(--card-bg);
        border-radius: 0 0 16px 16px !important;
        border-top: none !important;
      }

      .daily-income-card {
        background: var(--card-bg);
        border-radius: 0 0 16px 16px !important;
        border-top: none !important;
      }

      .budget-usage-card {
        background: var(--card-bg);
        border-radius: 0 0 16px 16px !important;
        border-top: none !important;
      }

      /* Кнопка "Бюджет по категориям" */
      .budget-categories-button-container {
        margin-top: 12px;
      }

      .budget-categories-btn {
        width: 100%;
        background: linear-gradient(135deg, 
          rgba(34, 197, 94, 0.1), 
          rgba(16, 185, 129, 0.1)
        );
        border: 1px solid rgba(34, 197, 94, 0.2);
        border-radius: 16px;
        padding: 20px;
        display: flex;
        align-items: center;
        gap: 16px;
        cursor: pointer;
        transition: all 0.3s ease;
        color: var(--text);
        text-align: left;
        box-shadow: 0 4px 20px rgba(34, 197, 94, 0.1);
      }

      .budget-categories-btn:hover {
        background: linear-gradient(135deg, 
          rgba(34, 197, 94, 0.15), 
          rgba(16, 185, 129, 0.15)
        );
        border-color: rgba(34, 197, 94, 0.3);
        transform: translateY(-2px);
        box-shadow: 0 8px 30px rgba(34, 197, 94, 0.2);
      }

      .budget-btn-icon {
        font-size: 2.5em;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
      }

      .budget-btn-content {
        flex: 1;
      }

      .budget-btn-content h3 {
        margin: 0 0 4px 0;
        font-size: 1.1em;
        font-weight: 600;
        color: var(--text);
      }

      .budget-btn-content p {
        margin: 0;
        font-size: 0.9em;
        color: var(--text-muted);
        line-height: 1.4;
      }

      .budget-btn-arrow {
        font-size: 1.5em;
        color: rgba(34, 197, 94, 0.6);
        transition: transform 0.3s ease;
      }

      .budget-categories-btn:hover .budget-btn-arrow {
        transform: translateX(4px);
        color: rgba(34, 197, 94, 0.8);
      }

      /* Информационная панель */
      .secondary-panel-center {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 40px 20px;
      }

      .info-panel {
        background: linear-gradient(135deg, 
          rgba(99, 102, 241, 0.1), 
          rgba(168, 85, 247, 0.1)
        );
        border: 1px solid rgba(99, 102, 241, 0.2);
        border-radius: 20px;
        padding: 30px;
        text-align: center;
        max-width: 500px;
        box-shadow: 0 8px 32px rgba(99, 102, 241, 0.1);
      }

      .info-panel h3 {
        color: var(--text);
        margin: 0 0 10px 0;
        font-size: 1.3em;
      }

      .info-panel p {
        color: var(--text-muted);
        margin: 0 0 20px 0;
        line-height: 1.5;
      }

      /* Улучшенные стили для содержимого карточек */
      .card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      /* Контейнеры содержимого */
      #collapse-transactions,
      #collapse-goals {
        padding: 20px;
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      /* Responsive для панелей */
      @media (max-width: 768px) {
        .main-panels {
          flex-direction: column;
          gap: 20px;
        }

        .main-panel-left,
        .main-panel-right {
          flex: none;
          min-width: auto;
        }

        .card {
          min-height: auto;
        }

        .transactions-list,
        #goalsList {
          max-height: 300px;
        }
      }

      /* Стили для блока целей */
      .goals-container {
        display: grid;
        grid-template-columns: 1fr;
        gap: 18px;
        min-height: 200px;
      }

      .goals-empty-state {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 40px 20px;
        background: linear-gradient(135deg, 
          rgba(99, 102, 241, 0.1), 
          rgba(168, 85, 247, 0.1)
        );
        border-radius: 16px;
        border: 2px dashed rgba(99, 102, 241, 0.3);
        min-height: 300px;
      }

      .empty-state-icon {
        font-size: 4rem;
        margin-bottom: 16px;
        opacity: 0.7;
      }

      .goals-empty-state h4 {
        margin: 0 0 8px 0;
        color: var(--text);
        font-size: 1.3em;
        font-weight: 600;
      }

      .goals-empty-state p {
        margin: 0 0 20px 0;
        color: var(--text-secondary);
        font-size: 0.9em;
        line-height: 1.5;
        max-width: 250px;
      }

      .btn-add-goal {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        color: white;
        border: none;
        border-radius: 12px;
        padding: 12px 24px;
        font-size: 0.95em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
      }

      .btn-add-goal:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
      }

      /* Скрываем empty state когда есть цели */
      .goals-container:not(:empty) + .goals-empty-state {
        display: none;
      }

      /* Стили для вторичных панелей */
      .secondary-panels {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 20px;
        margin-top: 20px;
        align-items: stretch;
      }

      .secondary-panel-left,
      .secondary-panel-right {
        display: flex;
        flex-direction: column;
      }

      .daily-income-card,
      .budget-categories-card {
        flex: 1;
        min-height: 400px;
      }

      /* Responsive для вторичных панелей */
      @media (max-width: 768px) {
        .secondary-panels {
          grid-template-columns: 1fr;
          gap: 15px;
        }

        .daily-income-card,
        .budget-categories-card {
          min-height: auto;
        }
      }

      @media (max-width: 768px) {
        .unified-header-dashboard {
          margin-bottom: 20px;
        }

        .couple-header-section {
          padding: 20px;
        }

        .app-title-area {
          flex-direction: column;
          gap: 15px;
          align-items: center;
          text-align: center;
          margin-bottom: 20px;
        }

        .app-title h1 {
          font-size: 1.8rem;
        }

        .couple-stats-grid {
          grid-template-columns: 1fr;
          gap: 15px;
        }

        .total-balance-display {
          order: -1;
          margin-bottom: 15px;
        }

        .person-stat {
          padding: 12px;
        }

        .person-avatar {
          font-size: 2em;
        }

        .balance-icon {
          font-size: 2.5em;
        }

        .balance-value {
          font-size: 1.8em;
        }

        .detailed-stats-section {
          padding: 20px;
        }
      }

      @media (max-width: 480px) {
        .couple-header-section {
          padding: 15px;
        }

        .app-title h1 {
          font-size: 1.6rem;
        }

        .person-stat {
          gap: 10px;
          padding: 10px;
        }

        .person-amount {
          font-size: 1.2em;
        }

        .balance-value {
          font-size: 1.6em;
        }

        .detailed-stats-section {
          padding: 15px;
        }
      }

      /* Объединенная карточка статистики */
      .unified-stats-card {
        background: var(--card-bg);
        border-radius: 20px;
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        border: 1px solid var(--card-border);
        overflow: hidden;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .unified-stats-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 16px 50px rgba(0, 0, 0, 0.2);
      }

      /* Секция главного баланса */
      .main-balance-section {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        padding: 30px;
        text-align: center;
        position: relative;
      }

      .balance-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
      }

      .balance-header h3 {
        margin: 0;
        font-size: 1.3em;
        color: white;
        font-weight: 600;
      }

      .balance-update {
        font-size: 0.85em;
        color: rgba(255, 255, 255, 0.8);
        background: rgba(255, 255, 255, 0.1);
        padding: 4px 12px;
        border-radius: 12px;
        backdrop-filter: blur(10px);
      }

      .balance-amount {
        font-size: 3.5rem;
        font-weight: 700;
        color: white;
        margin: 0;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        transition: transform 0.3s ease;
      }

      .balance-amount:hover {
        transform: scale(1.05);
      }

      /* Сетка статистики */
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 0;
      }

      .stat-item {
        padding: 24px 20px;
        text-align: center;
        transition: all 0.3s ease;
        border-right: 1px solid var(--card-border);
        position: relative;
      }

      .stat-item:last-child {
        border-right: none;
      }

      .stat-item:hover {
        background: rgba(99, 102, 241, 0.05);
        transform: translateY(-2px);
      }

      .stat-icon {
        font-size: 2em;
        margin-bottom: 8px;
        opacity: 0.8;
      }

      .stat-content {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .stat-label {
        font-size: 0.9em;
        color: var(--text-secondary);
        font-weight: 500;
      }

      .stat-value {
        font-size: 1.8em;
        font-weight: 700;
        margin: 8px 0;
        transition: transform 0.2s ease, color 0.2s ease;
      }

      .stat-item:hover .stat-value {
        transform: scale(1.1);
      }

      .stat-period {
        font-size: 0.8em;
        color: var(--text-muted);
      }

      /* Цветовая кодировка для разных типов статистики */
      .income-stat .stat-icon { color: var(--success); }
      .expense-stat .stat-icon { color: var(--danger); }
      .savings-stat .stat-icon { color: var(--warning); }
      .budget-stat .stat-icon { color: var(--info); }

      .income {
        color: var(--success);
      }
      .expense {
        color: var(--danger);
      }
      .savings {
        color: var(--info);
      }

      .main-content {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 20px;
      }

      .card {
        background: var(--card-bg);
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 20px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        border: 1px solid var(--card-border);
      }

      .card h2 {
        margin-bottom: 20px;
        color: var(--primary);
        border-bottom: 2px solid var(--primary);
        padding-bottom: 10px;
      }

      .quick-actions {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 15px;
        margin-bottom: 20px;
      }

      .btn {
        padding: 12px 20px;
        border: none;
        border-radius: 10px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
      }
      
      .btn-sm {
        padding: 6px 10px;
        font-size: 0.75em;
        border-radius: 20px;
      }

      .btn-primary {
        background: var(--primary);
        color: white;
      }

      .btn-success {
        background: var(--success);
        color: white;
      }

      .btn-danger {
        background: var(--danger);
        color: white;
      }

      .btn-warning {
        background: var(--warning);
        color: var(--dark);
      }

      .btn-info {
        background: var(--info);
        color: white;
      }

      .btn-purple {
        background: linear-gradient(135deg, #8b5cf6, #a855f7);
        color: white;
        border: none;
      }

      .btn-purple:hover {
        background: linear-gradient(135deg, #7c3aed, #9333ea);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
      }

      .btn-secondary {
        background: var(--secondary);
        color: white;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        filter: brightness(1.1);
      }

      .form-group {
        margin-bottom: 15px;
      }

      .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: 600;
        color: var(--text);
      }

      .form-control {
        width: 100%;
        padding: 12px;
        border: 2px solid var(--card-border);
        border-radius: 10px;
        background: rgba(255, 255, 255, 0.05);
        color: var(--text);
        font-size: 1rem;
        transition: all 0.3s ease;
      }

      .form-control:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(109, 40, 217, 0.3);
      }

      select.form-control {
        background: var(--card-bg);
        color: var(--text);
      }

      select.form-control option {
        background: var(--card-bg);
        color: var(--text);
        padding: 10px;
      }

      .transactions-list {
        overflow: visible;
      }

      .transaction-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 12px; /* Уменьшили с 15px */
        margin-bottom: 8px; /* Уменьшили с 10px */
        background: rgba(255, 255, 255, 0.05);
        border-radius: 8px; /* Уменьшили с 10px */
        border-left: 3px solid var(--primary); /* Уменьшили с 4px */
        transition: all 0.3s ease, opacity 0.4s, max-height 0.4s;
        border: 1px solid var(--card-border);
        opacity: 1;
        max-height: 150px; /* Уменьшили с 200px */
        overflow: hidden;
        will-change: opacity, max-height;
      }

      .transaction-item.transaction-anim-enter {
        opacity: 0;
        max-height: 0;
      }
      .transaction-item.transaction-anim-enter-active {
        opacity: 1;
        max-height: 150px; /* Обновили для соответствия */
        transition: opacity 0.4s, max-height 0.4s;
      }
      .transaction-item.transaction-anim-leave {
        opacity: 1;
        max-height: 150px; /* Обновили для соответствия */
      }
      .transaction-item.transaction-anim-leave-active {
        opacity: 0;
        max-height: 0;
        transition: opacity 0.4s, max-height 0.4s;
      }

      .transaction-item:hover {
        background: rgba(255, 255, 255, 0.08);
        border-color: var(--primary);
        box-shadow: 0 2px 12px rgba(109, 40, 217, 0.15);
      }

      .transaction-income {
        border-left-color: var(--success);
        background: linear-gradient(90deg, #10b98122 0%, #10b98108 100%);
        box-shadow: 0 2px 12px #10b98133;
      }

      .transaction-expense {
        border-left-color: var(--danger);
        background: linear-gradient(90deg, #ef444422 0%, #ef444408 100%);
        box-shadow: 0 2px 12px #ef444433;
      }

      .transaction-savings {
        border-left-color: var(--info);
        background: linear-gradient(90deg, #3b82f622 0%, #3b82f608 100%);
        box-shadow: 0 2px 12px #3b82f633;
      }

      .transaction-info {
        flex: 1;
      }

      .transaction-amount {
        font-weight: bold;
        font-size: 1rem; /* Уменьшили с 1.1rem */
      }

      .category-badge {
        display: inline-flex;
        align-items: center;
        gap: 4px; /* Уменьшили с 5px */
        padding: 3px 6px; /* Уменьшили с 4px 8px */
        border-radius: 16px; /* Уменьшили с 20px */
        font-size: 0.75rem; /* Уменьшили с 0.8rem */
        margin-right: 4px; /* Уменьшили с 5px */
        background: var(--primary);
        color: white;
      }

      .person-badge {
        display: inline-block;
        padding: 2px 5px; /* Уменьшили с 2px 6px */
        border-radius: 8px; /* Уменьшили с 10px */
        font-size: 0.65rem; /* Уменьшили с 0.7rem */
        background: var(--info);
        color: white;
        margin-left: 4px; /* Уменьшили с 5px */
      }

      .transaction-actions {
        display: flex;
        gap: 4px; /* Уменьшили с 5px */
        margin-left: 8px; /* Уменьшили с 10px */
      }

      .transaction-actions button {
        background: none;
        border: none;
        color: var(--text-muted);
        cursor: pointer;
        padding: 4px; /* Уменьшили с 5px */
        border-radius: 4px; /* Уменьшили с 5px */
        transition: all 0.3s ease;
        font-size: 0.85rem; /* Добавили размер шрифта */
      }

      .transaction-actions button:hover {
        background: rgba(255, 255, 255, 0.1);
        color: var(--text);
      }

      .progress-bar {
        height: 8px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
        overflow: hidden;
        margin: 10px 0;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, var(--success), var(--primary));
        border-radius: 4px;
        transition: width 0.3s ease;
      }

      /* Дублирующиеся стили модального окна удалены - используется основное определение в начале файла */

      .close {
        position: absolute;
        top: 15px;
        right: 15px;
        font-size: 1.5rem;
        cursor: pointer;
        color: var(--text-muted);
        transition: color 0.3s ease;
        background: none;
        border: none;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .close:hover {
        color: var(--danger);
        background: rgba(239, 68, 68, 0.1);
        border-radius: 50%;
      }

      .tabs {
        display: flex;
        margin-bottom: 20px;
        border-bottom: 2px solid var(--card-border);
      }

      .tab {
        padding: 10px 20px;
        cursor: pointer;
        border-bottom: 2px solid transparent;
        margin-bottom: -2px;
        transition: all 0.3s ease;
        color: var(--text-muted);
      }

      .tab.active {
        border-bottom-color: var(--primary);
        color: var(--primary);
      }

      .tab:hover {
        color: var(--primary);
      }

      .chart-container {
        height: 300px;
        margin: 20px 0;
      }

      /* Дублирующиеся стили уведомлений удалены */

      .category-management {
        margin-top: 15px;
        padding-top: 15px;
        border-top: 1px solid var(--card-border);
      }

      .category-input-group {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
      }

      .category-input-group input,
      .category-input-group select {
        flex: 1;
      }

      .categories-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        margin-top: 10px;
      }

      .category-tag {
        display: flex;
        align-items: center;
        gap: 8px;
        background: var(--primary);
        color: white;
        padding: 8px 12px;
        border-radius: 15px;
        font-size: 0.8rem;
      }

      .category-tag.income {
        background: var(--success);
      }

      .category-tag.expense {
        background: var(--danger);
      }

      .category-color {
        width: 16px;
        height: 16px;
        border-radius: 50%;
        border: 2px solid white;
      }

      .category-actions {
        display: flex;
        gap: 5px;
        margin-left: auto;
      }

      .category-actions button {
        background: none;
        border: none;
        color: white;
        cursor: pointer;
        padding: 2px;
        border-radius: 3px;
        transition: background 0.3s ease;
      }

      .category-actions button:hover {
        background: rgba(255, 255, 255, 0.2);
      }

      .budget-settings {
        margin-top: 15px;
        padding-top: 15px;
        border-top: 1px solid var(--card-border);
      }

      .budget-input-group {
        display: flex;
        gap: 10px;
        align-items: center;
      }

      .budget-input-group input {
        width: 150px;
      }

      .daily-income-stats {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-top: 15px;
      }

      .daily-stat {
        background: rgba(255, 255, 255, 0.05);
        padding: 15px;
        border-radius: 10px;
        text-align: center;
        border: 1px solid var(--card-border);
      }

      .icon-picker {
        display: grid;
        grid-template-columns: repeat(6, 1fr);
        gap: 5px;
        margin: 10px 0;
        max-height: 150px;
        overflow-y: auto;
        padding: 10px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
      }

      .icon-option {
        padding: 8px;
        text-align: center;
        cursor: pointer;
        border-radius: 5px;
        transition: all 0.3s ease;
        font-size: 1.2em;
      }

      .icon-option:hover {
        background: rgba(255, 255, 255, 0.1);
      }

      .icon-option.selected {
        background: var(--primary);
        color: white;
      }

      .category-limit-info {
        font-size: 0.8em;
        color: var(--text-muted);
        margin-top: 3px;
      }

      .category-limit-warning {
        color: var(--warning);
        font-weight: bold;
      }

      .category-limit-exceeded {
        color: var(--danger);
        font-weight: bold;
      }

      .limit-input-group {
        display: flex;
        gap: 10px;
        align-items: center;
        margin-top: 5px;
      }

      .limit-input-group input {
        width: 120px;
      }

      .backup-section {
        margin-top: 20px;
        padding-top: 20px;
        border-top: 1px solid var(--card-border);
      }

      .backup-buttons {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        margin-top: 10px;
      }

      .category-group {
        margin-bottom: 20px;
        padding: 15px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
        border: 1px solid var(--card-border);
      }

      .category-group h4 {
        margin-bottom: 10px;
        color: var(--primary);
        border-bottom: 1px solid var(--primary);
        padding-bottom: 5px;
      }

      .analytics-tab {
        display: none;
      }

      .analytics-tab.active {
        display: block;
      }

      /* Компактная панель фильтров */
      .filters-compact-panel {
        background: var(--card-bg);
        border: 1px solid var(--card-border);
        border-radius: 12px;
        padding: 12px 16px;
        margin-bottom: 15px;
      }

      .filters-compact-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 15px;
        overflow: hidden;
        flex-wrap: wrap;
      }

      .btn-toggle-filters {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        color: white;
        border: none;
        border-radius: 8px;
        padding: 8px 16px;
        font-size: 0.9em;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        flex-shrink: 0;
      }

      .btn-toggle-filters:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
      }

      .btn-toggle-filters.active {
        background: linear-gradient(135deg, var(--secondary), var(--primary));
      }

      .quick-sort {
        display: flex;
        align-items: center;
        gap: 8px;
        flex-shrink: 1;
        min-width: 0;
      }

      .quick-sort-label {
        font-size: 0.9em;
        color: var(--text-secondary);
        font-weight: 500;
        white-space: nowrap;
        flex-shrink: 0;
      }

      .quick-sort-control {
        background: var(--background);
        border: 1px solid var(--card-border);
        border-radius: 6px;
        padding: 6px 10px;
        color: var(--text);
        font-size: 0.85em;
        min-width: 100px;
        max-width: 140px;
        flex: 1;
      }

      .quick-sort-control:focus {
        outline: none;
        border-color: var(--primary);
      }

      /* Сворачиваемая панель фильтров */
      .filters-panel-collapsible {
        background: var(--card-bg);
        border: 1px solid var(--card-border);
        border-radius: 12px;
        padding: 16px;
        margin-bottom: 15px;
        animation: slideDown 0.3s ease-out;
      }

      .filters-panel-collapsible .filters-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 12px;
        margin-bottom: 15px;
      }

      .filters-actions {
        padding-top: 12px;
        border-top: 1px solid var(--card-border);
        display: flex;
        justify-content: center;
      }

      /* Стили для истории операций в аналитике */
      .analytics-filters-panel {
        background: var(--card-bg);
        border: 1px solid var(--card-border);
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 20px;
      }

      .filters-grid-analytics {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 16px;
        margin-bottom: 20px;
      }

      .filter-group-analytics {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .filter-label-analytics {
        font-size: 0.9em;
        font-weight: 600;
        color: var(--text);
      }

      .filter-control-analytics {
        background: var(--background);
        border: 1px solid var(--card-border);
        border-radius: 8px;
        padding: 10px 12px;
        color: var(--text);
        font-size: 0.9em;
        transition: border-color 0.3s ease;
      }

      /* Принудительные стили для select и option */
      select.filter-control-analytics {
        background: var(--background) !important;
        color: var(--text) !important;
      }

      .filter-control-analytics:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
      }

      .analytics-filter-actions {
        display: flex;
        gap: 12px;
        justify-content: center;
        padding-top: 16px;
        border-top: 1px solid var(--card-border);
      }

      .analytics-history-container {
        background: var(--card-bg);
        border: 1px solid var(--card-border);
        border-radius: 12px;
        padding: 20px;
      }

      .analytics-history-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 16px;
        border-bottom: 1px solid var(--card-border);
      }

      .analytics-stats {
        display: flex;
        gap: 20px;
        font-size: 0.9em;
        color: var(--text-secondary);
      }

      .analytics-transactions-list {
        max-height: 600px;
        overflow-y: auto;
      }

      .analytics-transaction-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px;
        margin-bottom: 12px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
        border-left: 4px solid var(--primary);
        transition: all 0.3s ease;
        border: 1px solid var(--card-border);
      }

      .analytics-transaction-item:hover {
        background: rgba(255, 255, 255, 0.08);
        border-color: var(--primary);
        box-shadow: 0 2px 12px rgba(109, 40, 217, 0.15);
      }

      .analytics-transaction-info {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .analytics-transaction-main {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .analytics-transaction-details {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        font-size: 0.85em;
        color: var(--text-secondary);
      }

      .analytics-amount {
        font-weight: bold;
        font-size: 1.1rem;
      }

      /* Responsive для аналитики */
      @media (max-width: 768px) {
        .filters-grid-analytics {
          grid-template-columns: 1fr;
        }
        
        .analytics-filter-actions {
          flex-direction: column;
        }
        
        .analytics-history-header {
          flex-direction: column;
          gap: 12px;
          align-items: flex-start;
        }
        
        .analytics-stats {
          flex-direction: column;
          gap: 8px;
        }
      }

      /* Простая панель сортировки для блока операций */
      .simple-sort-panel {
        padding: 12px 16px;
        background: var(--card-bg);
        border: 1px solid var(--card-border);
        border-radius: 8px;
        margin-bottom: 16px;
      }

      .simple-sort-panel .quick-sort {
        display: flex;
        align-items: center;
        gap: 8px;
        justify-content: center;
      }
      @media (max-width: 768px) {
        .filters-compact-header {
          flex-direction: column;
          gap: 10px;
          align-items: stretch;
        }

        .quick-sort {
          width: 100%;
          justify-content: space-between;
        }

        .quick-sort-control {
          min-width: 80px;
          max-width: none;
          flex: 1;
        }

        .filters-panel-collapsible .filters-grid {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 480px) {
        .quick-sort {
          flex-direction: column;
          gap: 6px;
          align-items: stretch;
        }

        .quick-sort-label {
          text-align: center;
        }

        .quick-sort-control {
          width: 100%;
        }
      }

      /* Современные стили для панели фильтров */
      .filters-panel-modern {
        background: linear-gradient(135deg, var(--card-bg) 0%, rgba(99, 102, 241, 0.05) 100%);
        border: 1px solid var(--card-border);
        border-radius: 16px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      }

      .filters-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
        padding-bottom: 12px;
        border-bottom: 1px solid var(--card-border);
      }

      .filters-header h4 {
        margin: 0;
        color: var(--text);
        font-size: 1.1em;
        font-weight: 600;
      }

      .btn-toggle-search {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        color: white;
        border: none;
        border-radius: 10px;
        padding: 8px 16px;
        font-size: 0.9em;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
      }

      .btn-toggle-search:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
      }

      .filters-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 16px;
        align-items: end;
      }

      .filter-group {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .filter-label {
        font-size: 0.9em;
        color: var(--text-secondary);
        font-weight: 500;
        margin: 0;
      }

      .filter-control {
        background: var(--background);
        border: 1px solid var(--card-border);
        border-radius: 8px;
        padding: 10px 12px;
        color: var(--text);
        font-size: 0.9em;
        transition: all 0.3s ease;
      }

      .filter-control:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        background: var(--card-bg);
      }

      .btn-clear-filters {
        background: linear-gradient(135deg, #ef4444, #f87171);
        color: white;
        border: none;
        border-radius: 8px;
        padding: 10px 16px;
        font-size: 0.9em;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        height: fit-content;
      }

      .btn-clear-filters:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
      }

      /* Расширенная панель поиска */
      .advanced-search-panel-modern {
        background: var(--card-bg);
        border: 1px solid var(--card-border);
        border-radius: 16px;
        padding: 20px;
        margin-bottom: 20px;
        margin-top: 15px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        animation: slideDown 0.3s ease-out;
      }

      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .search-header {
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 1px solid var(--card-border);
      }

      .search-header h5 {
        margin: 0 0 5px 0;
        color: var(--text);
        font-size: 1.1em;
        font-weight: 600;
      }

      .search-tip {
        font-size: 0.85em;
        color: var(--text-secondary);
        font-style: italic;
      }

      .search-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 16px;
        margin-bottom: 20px;
      }

      .search-group {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .search-label {
        font-size: 0.9em;
        color: var(--text-secondary);
        font-weight: 500;
        margin: 0;
      }

      .search-control {
        background: var(--background);
        border: 1px solid var(--card-border);
        border-radius: 8px;
        padding: 10px 12px;
        color: var(--text);
        font-size: 0.9em;
        transition: all 0.3s ease;
      }

      .search-control:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        background: var(--card-bg);
      }

      .search-actions {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
        padding-top: 15px;
        border-top: 1px solid var(--card-border);
      }

      .btn-search-action {
        border: none;
        border-radius: 8px;
        padding: 10px 16px;
        font-size: 0.9em;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        flex: 1;
        min-width: 140px;
      }

      .btn-search-action.primary {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        color: white;
        box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
      }

      .btn-search-action.primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
      }

      .btn-search-action.secondary {
        background: linear-gradient(135deg, #6b7280, #9ca3af);
        color: white;
      }

      .btn-search-action.secondary:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 15px rgba(107, 114, 128, 0.3);
      }

      .btn-search-action.outline {
        background: transparent;
        border: 1px solid var(--primary);
        color: var(--primary);
      }

      .btn-search-action.outline:hover {
        background: var(--primary);
        color: white;
        transform: translateY(-1px);
      }

      /* Responsive стили */
      @media (max-width: 768px) {
        .filters-grid {
          grid-template-columns: 1fr;
        }

        .search-grid {
          grid-template-columns: 1fr;
        }

        .search-actions {
          flex-direction: column;
        }

        .btn-search-action {
          min-width: auto;
        }

        .filters-header {
          flex-direction: column;
          gap: 12px;
          align-items: stretch;
        }
      }

@media (max-width: 768px) {
  .dashboard,
  .main-content {
    grid-template-columns: 1fr;
  }

  .quick-actions {
    grid-template-columns: 1fr;
  }

  /* Адаптивность для объединенной карточки */
  .main-balance-section {
    padding: 25px 20px;
  }

  .balance-header {
    flex-direction: column;
    gap: 10px;
    text-align: center;
  }

  .balance-amount {
    font-size: 2.8rem;
  }

  .stats-grid {
    grid-template-columns: 1fr 1fr;
  }

  .stat-item {
    padding: 20px 15px;
    border-right: none;
    border-bottom: 1px solid var(--card-border);
  }

  .stat-item:nth-child(odd) {
    border-right: 1px solid var(--card-border);
  }

  .stat-item:nth-child(3),
  .stat-item:nth-child(4) {
    border-bottom: none;
  }

  .stat-value {
    font-size: 1.5em;
  }

  .categories-grid {
    grid-template-columns: 1fr;
  }

  .category-input-group {
    flex-direction: column;
  }

  .budget-input-group {
    flex-direction: column;
    align-items: stretch;
  }

  .limit-input-group {
    flex-direction: column;
    align-items: stretch;
  }

  .backup-buttons {
    grid-template-columns: 1fr;
  }
}

/* Промежуточный брейкпоинт для планшетов */
@media (max-width: 1024px) and (min-width: 769px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stat-item {
    padding: 22px 18px;
  }
  
  .stat-item:nth-child(odd) {
    border-right: 1px solid var(--card-border);
  }
  
  .stat-item:nth-child(3),
  .stat-item:nth-child(4) {
    border-top: 1px solid var(--card-border);
    border-bottom: none;
  }
}

@media (max-width: 480px) {
  .main-balance-section {
    padding: 20px 15px;
  }
  
  .balance-amount {
    font-size: 2.5rem;
  }
  
  .stats-grid {
    grid-template-columns: 1fr;
  }
  
  .stat-item {
    border-right: none !important;
    border-bottom: 1px solid var(--card-border);
  }
  
  .stat-item:last-child {
    border-bottom: none;
  }
}

@media (max-width: 700px) {
        body {
          padding: 8px;
        }
        .container {
          max-width: 100vw;
          padding: 8px;
          border-radius: 12px;
          box-shadow: none;
        }
        .header {
          padding: 12px;
          font-size: 1.1em;
          border-radius: 12px;
        }
        .quick-actions {
          grid-template-columns: 1fr;
          gap: 10px;
        }
        .btn, button {
          font-size: 1.1em;
          padding: 14px 0;
          min-width: 48px;
          border-radius: 12px;
        }
        .transactions-list {
          max-height: 60vh;
        }
        .main-content {
          display: block;
          gap: 0;
        }
        .dashboard {
          display: block;
          gap: 0;
        }
        .balance-card {
          font-size: 1.2em;
          padding: 12px;
          border-radius: 12px;
        }
        .card {
          padding: 12px;
          border-radius: 12px;
        }
        .modal-content {
          padding: 12px;
          border-radius: 12px;
          max-width: 98vw;
        }
        .person-stat {
          font-size: 1em;
          padding: 8px;
        }
        .category-badge, .person-badge {
          font-size: 0.9em;
          padding: 4px 8px;
        }
      }

      @keyframes gradientBG {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

/* Стили для вкладок настроек */
.settings-tab {
  background: none;
  border: none;
  padding: 12px 20px;
  cursor: pointer;
  color: var(--text-muted);
  border-bottom: 2px solid transparent;
  transition: all 0.2s;
  font-size: 1em;
}

.settings-tab:hover {
  color: var(--primary);
}

.settings-tab.active {
  color: var(--primary);
  border-bottom-color: var(--primary);
}

.settings-content {
  display: none;
}

.settings-content.active {
  display: block;
}

.goals-container {
  min-height: 60px;
}

/* Цели в том же современном стиле */
.goal-item {
  width: 100%;
  margin-bottom: 12px;
  padding: 18px;
  background: linear-gradient(135deg, #134e4a 0%, #0f766e 50%, #134e4a 100%);
  border-radius: 12px;
  border: 1px solid rgba(20, 184, 166, 0.3);
  box-shadow: 
    0 4px 16px rgba(0, 0, 0, 0.2);
  transition: all 0.4s ease;
  position: relative;
  overflow: hidden;
  min-height: 160px;
  display: flex;
  flex-direction: column;
}

.goal-drag-handle {
  cursor: move;
  flex: 1;
  margin-bottom: 10px;
}

.goal-drag-handle:hover {
  opacity: 0.9;
}

.goal-item::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, #14b8a6, #5eead4, #2dd4bf);
}

.goal-item::after {
  content: '';
  position: absolute;
  top: -50%;
  right: -50%;
  width: 100%;
  height: 200%;
  background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.03), transparent);
  transform: rotate(25deg);
  transition: all 0.6s ease;
  opacity: 0;
}

.goal-item:hover {
  transform: translateY(-1px);
  box-shadow: 
    0 8px 24px rgba(0, 0, 0, 0.25),
    0 0 0 1px rgba(20, 184, 166, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
  border-color: rgba(20, 184, 166, 0.5);
}

.goal-item:hover::after {
  opacity: 1;
  animation: shine 0.6s ease-out;
}

.goal-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 16px;
}

.goal-name {
  font-weight: 600;
  color: #f0fdfa;
  font-size: 1em;
  display: flex;
  align-items: center;
  gap: 10px;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.goal-name::before {
  content: '🎯';
  font-size: 1em;
}

.goal-amounts {
  font-size: 0.8em;
  color: #ccfbf1;
  font-weight: 500;
  background: linear-gradient(135deg, rgba(20, 184, 166, 0.2), rgba(94, 234, 212, 0.2));
  padding: 6px 10px;
  border-radius: 6px;
  border: 1px solid rgba(20, 184, 166, 0.3);
  backdrop-filter: blur(10px);
  text-align: center;
  min-width: 90px;
}

.goal-progress-bar {
  width: 100%;
  height: 10px;
  background: linear-gradient(90deg, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.2));
  border-radius: 6px;
  overflow: hidden;
  margin-bottom: 10px;
  position: relative;
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.4);
}

.goal-progress-bar::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
}

.goal-progress-fill {
  height: 100%;
  border-radius: 4px;
  transition: all 0.4s ease;
  background: linear-gradient(90deg, #10b981, #34d399);
  min-width: 2px;
  position: relative;
  box-shadow: 0 0 10px rgba(16, 185, 129, 0.3);
}

.goal-progress-fill::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  animation: shimmer 2s infinite;
}

.goal-status-text {
  font-size: 0.75em;
  color: #ccfbf1;
  font-weight: 500;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 8px;
  padding: 6px 10px;
  border-radius: 6px;
  background: rgba(20, 184, 166, 0.1);
  border: 1px solid rgba(20, 184, 166, 0.2);
  backdrop-filter: blur(10px);
  flex-grow: 1;
  cursor: default !important;
  pointer-events: auto !important;
}

.goal-actions {
  display: flex;
  gap: 6px;
  margin-top: auto;
  opacity: 1;
  justify-content: flex-end;
  cursor: default !important; /* Отменяем курсор перемещения */
  pointer-events: auto !important;
  position: relative;
  z-index: 5;
}

/* Принудительные стили для кнопок целей */
.goal-item .goal-actions .btn {
  padding: 8px 12px !important;
  font-size: 0.8em !important;
  border-radius: 8px !important;
  font-weight: 500 !important;
  transition: all 0.3s ease !important;
  border: 1px solid rgba(255, 255, 255, 0.3) !important;
  cursor: pointer !important;
  backdrop-filter: blur(15px) !important;
  min-width: 45px !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3) !important;
  position: relative !important;
  overflow: hidden !important;
  pointer-events: auto !important;
  z-index: 100 !important;
  user-select: none !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
}

/* Обеспечиваем что кнопки поверх всего */
.goal-item .goal-actions {
  position: relative !important;
  z-index: 50 !important;
  cursor: default !important;
  pointer-events: auto !important;
}

/* Обеспечиваем что статус текст не блокирует кнопки */
.goal-item .goal-status-text {
  pointer-events: auto !important;
  cursor: default !important;
  position: relative !important;
  z-index: 45 !important;
}

/* Временная отладка - убираем все возможные блокировки */
.goal-item * {
  pointer-events: auto !important;
}

.goal-item .goal-drag-handle {
  pointer-events: auto !important;
  cursor: move !important;
}

.goal-item .goal-drag-handle * {
  pointer-events: none !important;
}

.goal-item .goal-actions,
.goal-item .goal-actions * {
  pointer-events: auto !important;
}

/* Дополнительные стили для принудительного курсора */
.goal-actions .btn,
.goal-actions .btn * {
  cursor: pointer !important;
  pointer-events: auto !important;
  user-select: none !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
}

/* Убеждаемся что кнопка всегда сверху */
.goal-actions {
  position: relative;
  z-index: 5;
  cursor: default !important;
  pointer-events: auto !important;
}

/* Отключаем drag для области кнопок */
.goal-status-text {
  pointer-events: auto !important;
  cursor: default !important;
}

.goal-actions .btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.5s ease;
}

.goal-actions .btn.btn-success {
  background: linear-gradient(135deg, #10b981, #059669);
  color: white;
  border-color: #10b981;
  box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
}

.goal-actions .btn.btn-primary {
  background: linear-gradient(135deg, #6d28d9, #4c1d95);
  color: white;
  border-color: #6d28d9;
  box-shadow: 0 4px 15px rgba(109, 40, 217, 0.4);
}

.goal-actions .btn.btn-warning {
  background: linear-gradient(135deg, #f59e0b, #d97706);
  color: white;
  border-color: #f59e0b;
  box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
}

.goal-actions .btn.btn-danger {
  background: linear-gradient(135deg, #ef4444, #dc2626);
  color: white;
  border-color: #ef4444;
  box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
}

.goal-actions .btn:hover {
  transform: translateY(-1px);
  box-shadow: 
    0 4px 12px rgba(0, 0, 0, 0.25),
    0 0 0 1px rgba(255, 255, 255, 0.15);
}

.goal-actions .btn:hover::before {
  left: 100%;
}

.goal-actions .btn:active {
  transform: translateY(0);
}

/* Стили для индикаторов бюджета */
#budgetProgressBars {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 12px;
}

.budget-progress-item {
  margin-bottom: 12px;
  padding: 18px;
  background: linear-gradient(135deg, #1e1b4b 0%, #312e81 50%, #1e1b4b 100%);
  border-radius: 12px;
  border: 1px solid rgba(139, 92, 246, 0.3);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
  transition: none;
  position: relative;
  overflow: hidden;
  min-height: 160px;
  display: flex;
  flex-direction: column;
}

.budget-progress-item::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, #8b5cf6, #a78bfa, #c084fc);
}

.budget-progress-item::after {
  display: none;
}

.budget-progress-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 10px;
}

.budget-category-name {
  font-weight: 600;
  color: #f8fafc;
  font-size: 1em;
  display: flex;
  align-items: center;
  gap: 10px;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.budget-category-name::before {
  content: '�';
  font-size: 1.3em;
  filter: drop-shadow(0 0 8px rgba(139, 92, 246, 0.5));
}

.budget-amounts {
  font-size: 0.8em;
  color: #cbd5e1;
  font-weight: 500;
  background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(167, 139, 250, 0.2));
  padding: 6px 10px;
  border-radius: 6px;
  border: 1px solid rgba(139, 92, 246, 0.3);
  backdrop-filter: blur(10px);
  text-align: center;
  min-width: 90px;
}

.budget-progress-bar {
  width: 100%;
  height: 10px;
  background: linear-gradient(90deg, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.2));
  border-radius: 6px;
  overflow: hidden;
  margin-bottom: 10px;
  position: relative;
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.4);
}

.budget-progress-bar::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
}

.budget-progress-fill {
  height: 100%;
  transition: all 0.4s ease;
  border-radius: 4px;
  position: relative;
}

.budget-progress-fill::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  animation: shimmer 2s infinite;
}

@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

.budget-progress-fill.ok {
  background: linear-gradient(90deg, #10b981, #34d399);
  box-shadow: 0 0 10px rgba(16, 185, 129, 0.3);
}

.budget-progress-fill.warning {
  background: linear-gradient(90deg, #f59e0b, #fbbf24);
  box-shadow: 0 0 10px rgba(245, 158, 11, 0.3);
}

.budget-progress-fill.exceeded {
  background: linear-gradient(90deg, #ef4444, #f87171);
  box-shadow: 0 0 10px rgba(239, 68, 68, 0.3);
}

.budget-actions {
  display: flex;
  gap: 6px;
  margin-top: auto;
  justify-content: flex-end;
}

.budget-actions .btn {
  padding: 8px 12px;
  font-size: 0.8em;
  border-radius: 8px;
  font-weight: 500;
  transition: all 0.3s ease;
  border: 1px solid rgba(255, 255, 255, 0.3);
  cursor: pointer;
  backdrop-filter: blur(15px);
  min-width: 45px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  position: relative;
  overflow: hidden;
}

.budget-actions .btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.5s ease;
}

.budget-actions .btn.btn-primary {
  background: linear-gradient(135deg, #3b82f6, #1d4ed8);
  color: white;
  border-color: #3b82f6;
  box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
}

.budget-actions .btn.btn-secondary {
  background: linear-gradient(135deg, #8b5cf6, #7c3aed);
  color: white;
  border-color: #8b5cf6;
  box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
}

.budget-actions .btn.btn-danger {
  background: linear-gradient(135deg, #ef4444, #dc2626);
  color: white;
  border-color: #ef4444;
  box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
}

.budget-actions .btn:hover {
  transform: translateY(-1px);
  box-shadow: 
    0 4px 12px rgba(0, 0, 0, 0.25),
    0 0 0 1px rgba(255, 255, 255, 0.15);
}

.budget-actions .btn:hover::before {
  left: 100%;
}

.budget-actions .btn:active {
  transform: translateY(0);
}

.budget-status-text {
  font-size: 0.75em;
  font-weight: 500;
  text-align: center;
  margin-bottom: 8px;
  padding: 6px 10px;
  border-radius: 6px;
  background: rgba(0, 0, 0, 0.2);
  backdrop-filter: blur(10px);
  flex-grow: 1;
}

.budget-status-text.ok {
  color: #34d399;
  background: rgba(16, 185, 129, 0.1);
  border: 1px solid rgba(16, 185, 129, 0.2);
}

.budget-status-text.warning {
  color: #fbbf24;
  background: rgba(245, 158, 11, 0.1);
  border: 1px solid rgba(245, 158, 11, 0.2);
}

.budget-status-text.exceeded {
  color: #f87171;
  background: rgba(239, 68, 68, 0.1);
  border: 1px solid rgba(239, 68, 68, 0.2);
}

/* Responsive для индикаторов бюджета */
@media (max-width: 768px) {
  #budgetProgressBars {
    grid-template-columns: 1fr;
    gap: 8px;
  }
  
  .budget-progress-item {
    padding: 10px;
  }
  
  .budget-category-name {
    font-size: 0.85em;
  }
  
  .budget-amounts {
    font-size: 0.75em;
  }
}

/* Стили для расширенной аналитики */
.trends-insights {
  margin-top: 20px;
}

.insight-item {
  padding: 10px;
  margin: 8px 0;
  border-radius: 6px;
  border-left: 4px solid;
  background: var(--card-bg);
}

.insight-item.positive {
  border-left-color: #10b981;
  background: rgba(16, 185, 129, 0.1);
}

.insight-item.warning {
  border-left-color: #f59e0b;
  background: rgba(245, 158, 11, 0.1);
}

.insight-item.info {
  border-left-color: #3b82f6;
  background: rgba(59, 130, 246, 0.1);
}

.insight-item.suggestion {
  border-left-color: #8b5cf6;
  background: rgba(139, 92, 246, 0.1);
}

.category-stat {
  padding: 8px;
  margin: 6px 0;
  background: var(--card-bg);
  border-radius: 6px;
  border: 1px solid var(--card-border);
}

.category-stat small {
  display: block;
  color: var(--text-secondary);
  font-size: 0.85em;
  margin-top: 4px;
}

.comparison-stats {
  display: grid;
  gap: 10px;
  margin-top: 10px;
}

.comparison-item {
  padding: 8px;
  background: var(--card-bg);
  border-radius: 6px;
  border: 1px solid var(--card-border);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.comparison-item .positive {
  color: #10b981;
  font-weight: 600;
}

.comparison-item .negative {
  color: #ef4444;
  font-weight: 600;
}

/* Стили для прогнозов и рекомендаций */
.prediction-item, .recommendation-item {
  padding: 10px;
  margin: 8px 0;
  border-radius: 6px;
  border-left: 4px solid;
  background: var(--card-bg);
}

.prediction-item.completed {
  border-left-color: #10b981;
  background: rgba(16, 185, 129, 0.1);
}

.prediction-item.fast {
  border-left-color: #3b82f6;
  background: rgba(59, 130, 246, 0.1);
}

.prediction-item.on_track {
  border-left-color: #10b981;
  background: rgba(16, 185, 129, 0.1);
}

.prediction-item.slow {
  border-left-color: #f59e0b;
  background: rgba(245, 158, 11, 0.1);
}

.prediction-item.no_data {
  border-left-color: #6b7280;
  background: rgba(107, 114, 128, 0.1);
}

.recommendation-item.budget {
  border-left-color: #8b5cf6;
  background: rgba(139, 92, 246, 0.1);
}

.recommendation-item.warning {
  border-left-color: #f59e0b;
  background: rgba(245, 158, 11, 0.1);
}

.recommendation-item.alert {
  border-left-color: #ef4444;
  background: rgba(239, 68, 68, 0.1);
}

/* Стили для быстрых шаблонов */
.quick-templates-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 12px;
  max-height: 300px;
  overflow-y: auto;
}

.template-item {
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: 8px;
  padding: 12px;
  transition: all 0.2s ease;
}

.template-item:hover {
  border-color: var(--primary);
  box-shadow: 0 2px 8px rgba(124, 58, 237, 0.1);
}

.template-item.income {
  border-left: 4px solid #10b981;
}

.template-item.expense {
  border-left: 4px solid #ef4444;
}

.template-header {
  display: flex;
  align-items: center;
  gap: 10px;
}

.template-icon {
  font-size: 1.5em;
  min-width: 32px;
  text-align: center;
}

.template-info {
  flex: 1;
  min-width: 0;
}

.template-name {
  font-weight: 600;
  color: var(--text);
  margin-bottom: 2px;
}

.template-details {
  font-size: 0.85em;
  color: var(--text-secondary);
}

.template-actions {
  display: flex;
  gap: 5px;
}

.template-use-btn, .template-edit-btn, .template-delete-btn {
  padding: 5px 8px !important;
  font-size: 0.8em !important;
  min-width: 30px;
  height: 30px;
  border-radius: 4px;
}

.template-use-btn {
  background: var(--primary) !important;
  color: white !important;
}

.template-edit-btn {
  background: #6b7280 !important;
  color: white !important;
}

.template-delete-btn {
  background: #ef4444 !important;
  color: white !important;
}

.template-usage {
  font-size: 0.75em;
  color: var(--text-secondary);
  margin-top: 8px;
  text-align: center;
  padding-top: 8px;
  border-top: 1px solid var(--card-border);
}

.btn-outline {
  background: transparent;
  border: 1px solid var(--primary);
  color: var(--primary);
  transition: all 0.2s ease;
}

.btn-outline:hover {
  background: var(--primary);
  color: white;
}

/* Стили для повторяющихся операций */
.recurring-item {
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: 8px;
  padding: 15px;
  margin-bottom: 12px;
  transition: all 0.2s ease;
}

.recurring-item:hover {
  border-color: var(--primary);
  box-shadow: 0 2px 8px rgba(124, 58, 237, 0.1);
}

.recurring-item.income {
  border-left: 4px solid #10b981;
}

.recurring-item.expense {
  border-left: 4px solid #ef4444;
}

.recurring-item.inactive {
  opacity: 0.6;
  background: var(--background);
}

.recurring-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.recurring-info {
  flex: 1;
}

.recurring-name {
  font-weight: 600;
  color: var(--text);
  margin-bottom: 4px;
}

.recurring-details {
  font-size: 0.9em;
  color: var(--text-secondary);
  margin-bottom: 4px;
}

.recurring-next {
  font-size: 0.85em;
  font-weight: 500;
}

.recurring-actions {
  display: flex;
  gap: 8px;
}

.recurring-actions .btn {
  padding: 6px 10px !important;
  font-size: 0.9em !important;
}

/* Стили для опций частоты */
.frequency-options {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  margin-top: 10px;
}

.frequency-option {
  display: flex;
  flex-direction: column;
  gap: 5px;
}

.frequency-option label {
  font-size: 0.9em;
  color: var(--text-secondary);
}

.frequency-option select,
.frequency-option input {
  padding: 6px;
  border: 1px solid var(--card-border);
  border-radius: 4px;
  background: var(--card-bg);
  color: var(--text);
}

/* Стили для расширенного поиска */
.advanced-search-panel {
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 20px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.search-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 15px;
}

.search-field {
  display: flex;
  flex-direction: column;
  gap: 5px;
}

.search-field label {
  font-size: 0.9em;
  font-weight: 500;
  color: var(--text-secondary);
}

.search-field input,
.search-field select {
  padding: 8px 12px;
  border: 1px solid var(--card-border);
  border-radius: 6px;
  background: var(--input-bg, var(--card-bg));
  color: var(--text);
  font-size: 0.9em;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.search-field input:focus,
.search-field select:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

.search-actions {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-top: 20px;
  padding-top: 15px;
  border-top: 1px solid var(--card-border);
}

.search-actions button {
  flex: 1;
  min-width: 120px;
}

/* Стили для сохранённых фильтров */
.saved-filters-list {
  max-height: 400px;
  overflow-y: auto;
}

.saved-filter-item {
  background: var(--input-bg, var(--card-bg));
  border: 1px solid var(--card-border);
  border-radius: 8px;
  padding: 15px;
  margin-bottom: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: background-color 0.2s;
}

.saved-filter-item:hover {
  background: var(--hover-bg, rgba(255, 255, 255, 0.05));
}

.saved-filter-info {
  flex: 1;
}

.saved-filter-name {
  font-weight: 500;
  color: var(--text);
  margin-bottom: 4px;
}

.saved-filter-description {
  font-size: 0.85em;
  color: var(--text-secondary);
  margin-bottom: 8px;
}

.saved-filter-preview {
  font-size: 0.8em;
  color: var(--text-muted);
  font-family: monospace;
  background: rgba(0, 0, 0, 0.1);
  padding: 4px 8px;
  border-radius: 4px;
}

.saved-filter-actions {
  display: flex;
  gap: 8px;
}

.saved-filter-actions button {
  padding: 6px 12px;
  font-size: 0.85em;
}

/* Адаптивность для мобильных устройств */
@media (max-width: 768px) {
  .search-row {
    grid-template-columns: 1fr;
    gap: 15px;
  }
  
  .search-actions {
    flex-direction: column;
  }
  
  .search-actions button {
    min-width: auto;
  }
  
  .saved-filter-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }
  
  .saved-filter-actions {
    width: 100%;
    justify-content: flex-end;
  }
}

/* Стили для модального окна экспорта */
.export-options {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.export-options h3 {
  margin: 0 0 10px 0;
  font-size: 1.1em;
  color: var(--text);
}

.export-data-types,
.export-period {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.checkbox-label,
.radio-label {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--input-bg, var(--card-bg));
  border: 1px solid var(--card-border);
  border-radius: 6px;
  cursor: pointer;
  transition: background-color 0.2s, border-color 0.2s;
}

.checkbox-label:hover,
.radio-label:hover {
  background: var(--hover-bg, rgba(255, 255, 255, 0.05));
  border-color: var(--primary);
}

.checkbox-label input,
.radio-label input {
  margin: 0;
}

.custom-period {
  background: var(--input-bg, var(--card-bg));
  border: 1px solid var(--card-border);
  border-radius: 8px;
  padding: 15px;
  margin-top: 10px;
}

.period-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
}

.period-field {
  display: flex;
  flex-direction: column;
  gap: 5px;
}

.period-field label {
  font-size: 0.9em;
  color: var(--text-secondary);
}

.period-field input {
  padding: 8px 12px;
  border: 1px solid var(--card-border);
  border-radius: 6px;
  background: var(--card-bg);
  color: var(--text);
}

.export-formats {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.export-format-btn {
  padding: 12px 20px;
  text-align: left;
  font-size: 1em;
  border-radius: 8px;
  transition: transform 0.2s, box-shadow 0.2s;
}

.export-format-btn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.export-info {
  background: rgba(99, 102, 241, 0.1);
  border: 1px solid rgba(99, 102, 241, 0.2);
  border-radius: 8px;
  padding: 12px;
  margin-top: 15px;
}

/* Адаптивность для экспорта */
@media (max-width: 768px) {
  .period-row {
    grid-template-columns: 1fr;
    gap: 10px;
  }
  
  .export-formats {
    gap: 8px;
  }
  
  .export-format-btn {
    padding: 10px 16px;
    font-size: 0.9em;
  }
}

/* Стили для группировки операций по дням */
.day-header {
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: 8px;
  padding: 12px 16px;
  margin: 20px 0 10px 0;
  position: sticky;
  top: 10px;
  z-index: 10;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.day-header-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.day-title {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.day-date {
  font-weight: 600;
  color: var(--text);
  font-size: 1.1em;
}

.day-stats {
  font-size: 0.85em;
  color: var(--text-secondary);
}

.day-totals {
  display: flex;
  gap: 12px;
  align-items: center;
}

.day-income {
  color: var(--success);
  font-weight: 600;
  font-size: 0.9em;
}

.day-expense {
  color: var(--danger);
  font-weight: 600;
  font-size: 0.9em;
}

.day-transactions {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 20px;
}

.day-transactions .transaction-item {
  margin-left: 10px;
  position: relative;
}

.day-transactions .transaction-item:before {
  content: '';
  position: absolute;
  left: -10px;
  top: 50%;
  transform: translateY(-50%);
  width: 3px;
  height: 60%;
  background: var(--primary);
  border-radius: 2px;
  opacity: 0.3;
}

/* Индикатор загрузки */
.loading-indicator {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px 20px;
  color: var(--text-secondary);
  gap: 15px;
}

.loading-spinner {
  width: 40px;
  height: 40px;
  border: 3px solid var(--card-border);
  border-top: 3px solid var(--primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Улучшенная адаптивность для группировки */
@media (max-width: 768px) {
  .day-header {
    padding: 10px 12px;
    margin: 15px 0 8px 0;
  }
  
  .day-header-content {
    flex-direction: column;
    gap: 8px;
    align-items: flex-start;
  }
  
  .day-totals {
    gap: 8px;
  }
  
  .day-transactions .transaction-item {
    margin-left: 5px;
  }
  
  .day-transactions .transaction-item:before {
    left: -5px;
  }
}

/* Скрытие полос прокрутки для аналитики */
.analytics-scroll-container {
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
}

.analytics-scroll-container::-webkit-scrollbar {
  width: 4px;
}

.analytics-scroll-container::-webkit-scrollbar-track {
  background: transparent;
}

.analytics-scroll-container::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 2px;
}

.analytics-scroll-container::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* Исправление полей ввода в фильтрах */
.filter-amount-inputs {
  display: flex;
  gap: 10px;
  align-items: center;
}

.filter-amount-inputs input {
  flex: 1;
  min-width: 0;
  max-width: 80px;
}

/* ========== BURGER MENU ========== */
.burger-button {
  position: fixed;
  top: 16px;
  left: 16px;
  width: 48px;
  height: 48px;
  background: linear-gradient(135deg, var(--primary), #7c3aed);
  border-radius: 12px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  z-index: 9999;
  transition: all 0.3s ease;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
  border: 2px solid rgba(255, 255, 255, 0.1);
  padding: 0;
}

.burger-lines {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 3px;
}

.burger-button.active {
  background: var(--danger);
  border-radius: 50%;
  width: 55px;
  height: 55px;
}

.burger-button:hover {
  background: var(--secondary);
  transform: scale(1.05);
}

.burger-line {
  width: 20px;
  height: 2px;
  background: white;
  border-radius: 2px;
  transition: all 0.3s ease;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
  display: block;
}

.burger-menu {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: auto;
  max-height: 80vh;
  background: var(--card-bg);
  border-bottom: 2px solid var(--card-border);
  z-index: 9998;
  transform: translateY(-100%);
  transition: transform 0.4s ease;
  overflow-y: auto;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
  border-radius: 0 0 20px 20px;
  opacity: 1; /* Убеждаемся что меню видимое */
  visibility: visible; /* Убеждаемся что меню доступно */
}

.burger-menu.active {
  transform: translateY(0);
}

.burger-menu-header {
  padding: 20px;
  border-bottom: 2px solid var(--card-border);
  display: flex;
  justify-content: center;
  align-items: center;
  background: var(--primary);
  color: white;
  padding-left: 90px; /* Оставляем место для burger кнопки */
  position: relative;
}

.burger-menu-header h3 {
  margin: 0;
  font-size: 1.1em;
}

.burger-menu-content {
  padding: 20px;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 10px;
}

.burger-item {
  padding: 15px 20px;
  background: var(--background);
  border: 2px solid var(--card-border);
  border-radius: 12px;
  color: var(--text);
  font-size: 1em;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  font-weight: 500;
}

.burger-item:hover {
  background: var(--primary);
  color: white;
  border-color: var(--primary);
  transform: translateY(-2px);
  box-shadow: 0 4px 15px rgba(109, 40, 217, 0.3);
}

/* Overlay для закрытия меню */
.burger-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.5);
  z-index: 9997;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

.burger-overlay.active {
  opacity: 1;
  visibility: visible;
}

/* Адаптивность для burger menu */
@media (max-width: 768px) {
  .burger-menu-content {
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 8px;
    padding: 15px;
  }
  
  .burger-item {
    padding: 12px 15px;
    font-size: 0.9em;
  }
  
  .burger-menu {
    max-height: 70vh;
  }
}

@media (max-width: 480px) {
  .burger-menu-content {
    grid-template-columns: repeat(2, 1fr);
    gap: 6px;
    padding: 10px;
  }
  
  .burger-item {
    padding: 10px;
    font-size: 0.8em;
    flex-direction: column;
    gap: 5px;
  }
}

/* Стили для выпадающих списков в аналитике */
.filter-control-analytics option {
  background-color: #1a1b2e !important;
  color: #e2e8f0 !important;
  padding: 8px 12px;
}

.filter-control-analytics select option {
  background-color: #1a1b2e !important;
  color: #e2e8f0 !important;
}

/* Для всех select в аналитике */
select.filter-control-analytics option {
  background-color: #1a1b2e !important;
  color: #e2e8f0 !important;
  border: none;
}

/* Дополнительная стилизация для лучшей совместимости */
.filter-control-analytics:focus option {
  background-color: #2d2d42 !important;
  color: #e2e8f0 !important;
}

.filter-control-analytics option:hover {
  background-color: #4c1d95 !important;
  color: #ffffff !important;
}

/* ========== TOUCH GESTURES СТИЛИ ========== */
.swipe-container {
  position: relative;
  overflow: hidden;
}

.swipe-item {
  transform: translateX(0);
  transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
  will-change: transform;
}

.swipe-item.swiping {
  transition: none;
}

.swipe-item.swipe-left {
  transform: translateX(-100%);
  opacity: 0;
}

.swipe-item.swipe-right {
  transform: translateX(100%);
  opacity: 0;
}

.swipe-delete-indicator {
  position: absolute;
  top: 0;
  right: 0;
  height: 100%;
  width: 80px;
  background: linear-gradient(90deg, transparent, #ef4444);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 1.5em;
  opacity: 0;
  transition: opacity 0.2s ease;
  pointer-events: none;
  z-index: 1;
}

/* ========== УНИВЕРСАЛЬНАЯ АДАПТАЦИЯ ДЛЯ МОБИЛЬНЫХ УСТРОЙСТВ ========== */

/* Расширенные медиа-запросы для современных смартфонов */
@media (max-width: 1200px) and (pointer: coarse) {
  /* Это поймает большинство современных Android флагманов */
  body {
    font-size: 16px; /* Увеличиваем шрифт для мобильных */
  }
  
  .container {
    padding: 10px !important;
  }
  
  .card {
    margin-bottom: 15px;
    padding: 15px;
  }
  
  /* Кнопки делаем больше для touch */
  .btn {
    min-height: 44px;
    padding: 12px 16px;
  }
}

/* Специальные стили для JavaScript-определенных мобильных устройств */
.mobile-device .container {
  padding: 10px !important;
}

.mobile-device .card {
  margin-bottom: 15px !important;
  padding: 15px !important;
}

.mobile-device .btn {
  min-height: 44px !important;
  padding: 12px 16px !important;
}

.mobile-device .modal-content {
  width: 95% !important;
  max-width: 95vw !important;
  padding: 20px !important;
  margin: 10px !important;
}

/* Принудительно скрываем десктопные элементы на мобильных */
.mobile-device .desktop-only {
  display: none !important;
}

/* Показываем мобильные элементы только на мобильных */
.mobile-only {
  display: none;
}

.mobile-device .mobile-only {
  display: block !important;
}


.swipe-delete-indicator.show {
  opacity: 1;
}

.transaction-item {
  position: relative;
}

/* Haptic feedback visual */
.haptic-feedback {
  animation: hapticPulse 0.1s ease;
}

@keyframes hapticPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.02); }
  100% { transform: scale(1); }
}

/* ========== ПЛАВНЫЕ АНИМАЦИИ ДЛЯ ТРАНЗАКЦИЙ ========== */

/* Анимация появления транзакций при загрузке */
.transaction-item {
  opacity: 0;
  transform: translateY(20px);
  animation: transactionFadeIn 0.4s ease-out forwards;
}

/* Задержки для последовательного появления */
.transaction-item:nth-child(1) { animation-delay: 0.05s; }
.transaction-item:nth-child(2) { animation-delay: 0.1s; }
.transaction-item:nth-child(3) { animation-delay: 0.15s; }
.transaction-item:nth-child(4) { animation-delay: 0.2s; }
.transaction-item:nth-child(5) { animation-delay: 0.25s; }
.transaction-item:nth-child(6) { animation-delay: 0.3s; }
.transaction-item:nth-child(7) { animation-delay: 0.35s; }
.transaction-item:nth-child(8) { animation-delay: 0.4s; }
.transaction-item:nth-child(n+9) { animation-delay: 0.45s; }

/* Стили для фильтров транзакций */
.transaction-filters {
  padding: 15px;
  background: var(--card-bg);
  border-bottom: 1px solid var(--border-color);
  margin-bottom: 10px;
  border-radius: 8px 8px 0 0;
}

.filters-row {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  align-items: end;
}

.filter-group {
  display: flex;
  flex-direction: column;
  gap: 5px;
  min-width: 150px;
}

.filter-group label {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-color);
}

.filter-select,
.filter-input {
  padding: 8px 12px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  background: var(--bg-color);
  color: var(--text-color);
  font-size: 14px;
  transition: border-color 0.2s;
}

.filter-select:focus,
.filter-input:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
}

.filter-group .btn {
  margin-top: 0;
  padding: 8px 16px;
  font-size: 14px;
}

@media (max-width: 768px) {
  .filters-row {
    flex-direction: column;
    gap: 10px;
  }
  
  .filter-group {
    min-width: 100%;
  }
  
  .transaction-filters {
    padding: 12px;
  }
}

@keyframes transactionFadeIn {
  0% {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Анимация контейнера транзакций */
#transactionsList {
  transition: all 0.3s ease;
}

/* Плавная анимация обновления */
.transactions-updating {
  opacity: 0.7;
  transition: opacity 0.2s ease;
}

.transactions-updated {
  opacity: 1;
  transition: opacity 0.3s ease;
}

/* Анимация для новых транзакций */
.transaction-item.new-transaction {
  animation: newTransactionPulse 0.6s ease-out;
  border-left: 3px solid #28a745;
}

@keyframes newTransactionPulse {
  0% {
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.4);
  }
  50% {
    transform: scale(1.02);
    box-shadow: 0 0 0 10px rgba(40, 167, 69, 0.1);
  }
  100% {
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba(40, 167, 69, 0);
  }
}

/* Анимация загрузки */
.transactions-loading {
  position: relative;
  overflow: hidden;
}

.transactions-loading::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.1),
    transparent
  );
  animation: loading-shimmer 1.5s infinite;
  z-index: 1;
}

@keyframes loading-shimmer {
  0% { left: -100%; }
  100% { left: 100%; }
}
